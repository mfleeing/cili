{"version":3,"sources":["webpack:///./src/views/Home.vue?5a36","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?2db0","webpack:///./src/views/Home.vue","webpack:///./src/views/Home.vue?33cf"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","model","value","callback","$$v","input","expression","on","soso","directives","name","rawName","staticStyle","tableData","tableRowClassName","scopedSlots","_u","key","fn","scope","_s","$index","interval","$event","play","_e","class","shows","ref","audio","staticRenderFns","components","loading","page","curnum","n","noMore","computed","methods","row","rowIndex","isonly","size128","console","log","column","cellValue","Math","floor","toString","padStart","index","Date","toLocaleDateString","i","$axios","get","params","songmid","then","res","lyric","musicUrl","data","req_0","sip","midurlinfo","purl","imgUrl","albummid","setTimeout","push","songname","artist","singer","url","cover","lrc","$message","showClose","message","type","center","offset","catch","err","alert","getTime","totalnum","go","song","list","component"],"mappings":"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","file":"js/chunk-2f5cb18a.84f91f90.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('h1',{staticClass:\"header\"},[_vm._v(\"音乐搜索\")]),_c('hr'),_c('div',{staticClass:\"count\"},[_c('el-input',{staticClass:\"input\",attrs:{\"placeholder\":\"请输入歌手或者歌曲名\",\"clearable\":\"\"},model:{value:(_vm.input),callback:function ($$v) {_vm.input=$$v},expression:\"input\"}}),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\",\"disabled\":!this.input},on:{\"click\":_vm.soso}},[_vm._v(\"搜索\")])],1),_c('div',{staticClass:\"infinite-list-wrapper\"},[_c('el-table',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.load),expression:\"load\"}],staticClass:\"table\",staticStyle:{\"overflow\":\"auto\"},attrs:{\"data\":_vm.tableData,\"border\":\"\",\"size\":\"small\",\"infinite-scroll-distance\":\"10\",\"infinite-scroll-disabled\":\"disabled\",\"row-class-name\":_vm.tableRowClassName}},[_c('el-table-column',{attrs:{\"width\":\"50\",\"label\":\"序号\",\"resizable\":\"\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s((scope.$index+1))+\" \")]}}])}),_c('el-table-column',{attrs:{\"prop\":\"songname\",\"label\":\"音乐名称\",\"resizable\":\"\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"singer[0].name\",\"label\":\"作者\",\"resizable\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"albumname\",\"label\":\"专辑\",\"resizable\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"interval\",\"label\":\"音乐时长\",\"resizable\":\"\",\"formatter\":_vm.interval}}),_c('el-table-column',{attrs:{\"label\":\"播放\",\"align\":\"center\",\"width\":\"100px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-video-play\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.play(scope.$index)}}},[_vm._v(\"播放\")])]}}])}),_c('el-table-column',{attrs:{\"width\":\"20px\"}})],1),(_vm.loading)?_c('p',{staticStyle:{\"height\":\"20px\"}},[_vm._v(\"正在加载中...\")]):_vm._e(),(_vm.noMore)?_c('p',{staticStyle:{\"height\":\"20px\"}},[_vm._v(\"没有更多了\")]):_vm._e()],1),_c('div',{staticClass:\"play\",class:_vm.shows==true?'plays':''},[_c('aplayer',{ref:\"aplayer\",attrs:{\"audio\":_vm.audio,\"preload\":\"metadata\",\"autoplay\":\"\",\"lrcType\":1,\"fixed\":\"\"},on:{\"lrcShow\":function($event){_vm.shows=true},\"lrcHide\":function($event){_vm.shows=false}}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"home\">\n      <h1 class=\"header\">音乐搜索</h1>\n      <hr> \n      <div class=\"count\">\n         <el-input  placeholder=\"请输入歌手或者歌曲名\" v-model=\"input\"  clearable  class=\"input\"></el-input>\n         <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"soso\"   :disabled=\"!this.input\">搜索</el-button>\n      </div>\n      <div class=\"infinite-list-wrapper\">\n          <el-table :data=\"tableData\" class=\"table\"  border size='small'    v-infinite-scroll=\"load\"  infinite-scroll-distance=\"10\" infinite-scroll-disabled=\"disabled\"  :row-class-name=\"tableRowClassName\" style=\"overflow:auto\">  \n                <el-table-column   width=\"50\"   label=\"序号\" resizable   align=\"center\"  >\n                      <template slot-scope=\"scope\">{{(scope.$index+1)}} </template>\n                </el-table-column>\n                <el-table-column prop=\"songname\" label=\"音乐名称\" resizable    show-overflow-tooltip></el-table-column>\n                <el-table-column prop=\"singer[0].name\" label=\"作者\" resizable></el-table-column>\n                <el-table-column prop=\"albumname\" label=\"专辑\" resizable></el-table-column>\n                <el-table-column prop=\"interval\" label=\"音乐时长\" resizable   :formatter=\"interval\"></el-table-column> \n                <el-table-column  label=\"播放\"   align=\"center\"  width=\"100px\" > \n                    <template slot-scope=\"scope\"  style=\"width:100%;text-align:center\">\n                        <el-button type=\"primary\"    icon=\"el-icon-video-play\" @click=\"play(scope.$index)\"  size=\"small\">播放</el-button>\n                    </template>\n                </el-table-column > \n                 <el-table-column width=\"20px\">  </el-table-column> \n           </el-table>\n           <p v-if=\"loading\" style=\"height:20px\">正在加载中...</p>\n           <p v-if=\"noMore\" style=\"height:20px\">没有更多了</p>\n     </div>\n    <!-- <br><br><br><br> -->\n      <div class=\"play\"  :class=\"shows==true?'plays':''\">\n             <aplayer :audio=\"audio\" \n               ref=\"aplayer\"\n               preload=\"metadata\" \n               autoplay  \n              :lrcType=\"1\" \n               fixed  \n               @lrcShow=\"shows=true\"\n               @lrcHide=\"shows=false\"/>\n      </div>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'home',\n  components:{\n  },\n\n  data() {\n      return {\n        loading: false,\n        audio: [],\n        shows:false,\n        input: '',\n        page:1,\n        curnum:0,\n        n:20,\n        tableData:[],\n      }\n    },\n\n     mounted() {\n     this.noMore=false\n    },\n     computed: {\n      noMore () {\n        return this.curnum < this.n \n      },\n      disabled () {\n        return this.loading || this.noMore\n      }\n    },\n\n    methods:{\n      tableRowClassName({row,rowIndex}) {\n        if(row.isonly==1 ||row.size128==0){\n          console.log(rowIndex+1+\"不能播放\");\n          // return 'warning-row';\n        }\n        \n      },\n\n\n      interval(row, column, cellValue){\n         if(cellValue){\n           return  Math.floor(cellValue/60).toString().padStart(2,\"0\")+\":\"+(cellValue-(Math.floor(cellValue/60))*60).toString().padStart(2,\"0\");   \n         }else{\n           return '暂无时长'\n         }\n      },\n \n\n      pubtime(row, column, cellValue,index){\n        if(cellValue){\n           return new Date(cellValue*1000).toLocaleDateString();\n         }else{\n           return '暂无发行时间'\n         }\n      },\n\n      \n\n      play(i){\n        this.$axios.get('http://www.mhweb.top:3000/musicu',{\n           params:{\n           \"songmid\":this.tableData[i].songmid,\n           }\n        }).then( (res) =>{\n        this.lyric(i)\n        this.tableData[i].musicUrl=res.data.req_0.data.sip[0]+res.data.req_0.data.midurlinfo[0].purl; \n        this.tableData[i].imgUrl=\"http://y.gtimg.cn/music/photo_new/T002R180x180M000\" + this.tableData[i].albummid + \".jpg\";\n        if(this.tableData[i].musicUrl=='http://ws.stream.qqmusic.qq.com/'){\n           this.$message({\n          showClose: true,\n          message: 'Sorry ,此歌曲无版权,暂不支持播放!!!!',\n          type: 'error',\n           center: true,\n           offset:5\n        });\n          return ;\n        }else{\n            setTimeout( ()=>{\n        this.audio.push({\n            // id:this.tableData[i].cdIdx,\n            name: this.tableData[i].songname,\n            artist: this.tableData[i].singer[0].name,\n            url:this.tableData[i].musicUrl,\n            cover: this.tableData[i].imgUrl,\n            lrc: this.tableData[i].lyric,\n        });\n        },400)\n        }\n        }).catch ((err) => {\n         console.log('失败',err);\n         alert(\"获取资源失败,请联系管理员!!\")\n        })\n      },\n\n\n      lyric(i){\n          this.$axios.get('http://www.mhweb.top:3000/lyric',{\n           params:{\n            \"songmid\":this.tableData[i].songmid,\n             \"time\":new Date().getTime(),\n           }\n        }).then( (res) =>{\n            this.tableData[i].lyric=res.data.lyric;\n        }).catch ((err) => {\n         console.log('失败',err)\n        })\n      },\n\n      soso(){\n          this.page=1;\n          this.tableData=[];\n          this.totalnum=0;\n          this.go();\n      },\n\n       go(){  \n        this.$axios.get('http://www.mhweb.top:3000/proxy',{\n          params:{\n          'p':this.page,\n          'n':this.n,\n          'w':this.input,\n          }\n        }).then( (res) =>{\n          this.curnum=res.data.data.song.curnum;\n          for(let i=0;i<this.curnum;i++){\n                this.tableData.push(res.data.data.song.list[i])\n             } \n          this.loading = false\n        }).catch ((err) => {\n         console.log('失败',err)\n        })\n      },\n\n\n       load (){\n       this.loading = true\n       this.page+=1;\n      setTimeout(() =>{\n      this.go();\n       },100)\n      },\n\n\n  }\n}\n</script>\n\n<style>\n.home{\n  width: 100%;\n  height: 100%;\n  overflow-y: hidden\n}\n.header{\n  width: 100%;\n  height: 60px;\n  line-height: 60px;\n  text-align: center;\n}\n.table{\n  width: 100%;\n  height: 510px;\n}\n.infinite-list-wrapper{\n text-align: center;\n margin-bottom: 4%;\n}\n.el-table .warning-row {\n       background: rgba(92, 89, 89, 0.616);\n  }\n\n.play{\n    position: fixed;\n    /* display: block; */\n    right: 0;\n    left: 0;\n    bottom: 0;\n    height: 66px;\n    z-index: 999;\n    /* position: relative; */\n    background: rgb(22, 21, 21);\n    \n}\n.plays{\n background: rgba(22, 21, 21, 0.9);\n}\n\n@media screen and (max-width: 1920px) {\n.count{\n  display: flex;\n  justify-content: center;\n  width:80%;\n  margin: 2% auto;\n}\n.count .input{\n width:100%;\n min-width: 200px;\n margin-right: 2%;\n}\n}\n\n</style>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=b65555b4&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}