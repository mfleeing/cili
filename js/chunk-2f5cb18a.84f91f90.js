(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f5cb18a"],{"5ced":function(t,a,e){},bb51:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"home"},[e("h1",{staticClass:"header"},[t._v("音乐搜索")]),e("hr"),e("div",{staticClass:"count"},[e("el-input",{staticClass:"input",attrs:{placeholder:"请输入歌手或者歌曲名",clearable:""},model:{value:t.input,callback:function(a){t.input=a},expression:"input"}}),e("el-button",{attrs:{type:"primary",icon:"el-icon-search",disabled:!this.input},on:{click:t.soso}},[t._v("搜索")])],1),e("div",{staticClass:"infinite-list-wrapper"},[e("el-table",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],staticClass:"table",staticStyle:{overflow:"auto"},attrs:{data:t.tableData,border:"",size:"small","infinite-scroll-distance":"10","infinite-scroll-disabled":"disabled","row-class-name":t.tableRowClassName}},[e("el-table-column",{attrs:{width:"50",label:"序号",resizable:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(t._s(a.$index+1)+" ")]}}])}),e("el-table-column",{attrs:{prop:"songname",label:"音乐名称",resizable:"","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{prop:"singer[0].name",label:"作者",resizable:""}}),e("el-table-column",{attrs:{prop:"albumname",label:"专辑",resizable:""}}),e("el-table-column",{attrs:{prop:"interval",label:"音乐时长",resizable:"",formatter:t.interval}}),e("el-table-column",{attrs:{label:"播放",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",icon:"el-icon-video-play",size:"small"},on:{click:function(e){return t.play(a.$index)}}},[t._v("播放")])]}}])}),e("el-table-column",{attrs:{width:"20px"}})],1),t.loading?e("p",{staticStyle:{height:"20px"}},[t._v("正在加载中...")]):t._e(),t.noMore?e("p",{staticStyle:{height:"20px"}},[t._v("没有更多了")]):t._e()],1),e("div",{staticClass:"play",class:1==t.shows?"plays":""},[e("aplayer",{ref:"aplayer",attrs:{audio:t.audio,preload:"metadata",autoplay:"",lrcType:1,fixed:""},on:{lrcShow:function(a){t.shows=!0},lrcHide:function(a){t.shows=!1}}})],1)])},l=[],i={name:"home",components:{},data(){return{loading:!1,audio:[],shows:!1,input:"",page:1,curnum:0,n:20,tableData:[]}},mounted(){this.noMore=!1},computed:{noMore(){return this.curnum<this.n},disabled(){return this.loading||this.noMore}},methods:{tableRowClassName({row:t,rowIndex:a}){1!=t.isonly&&0!=t.size128||console.log(a+1+"不能播放")},interval(t,a,e){return e?Math.floor(e/60).toString().padStart(2,"0")+":"+(e-60*Math.floor(e/60)).toString().padStart(2,"0"):"暂无时长"},pubtime(t,a,e,s){return e?new Date(1e3*e).toLocaleDateString():"暂无发行时间"},play(t){this.$axios.get("http://www.mhweb.top:3000/musicu",{params:{songmid:this.tableData[t].songmid}}).then(a=>{this.lyric(t),this.tableData[t].musicUrl=a.data.req_0.data.sip[0]+a.data.req_0.data.midurlinfo[0].purl,this.tableData[t].imgUrl="http://y.gtimg.cn/music/photo_new/T002R180x180M000"+this.tableData[t].albummid+".jpg","http://ws.stream.qqmusic.qq.com/"!=this.tableData[t].musicUrl?setTimeout(()=>{this.audio.push({name:this.tableData[t].songname,artist:this.tableData[t].singer[0].name,url:this.tableData[t].musicUrl,cover:this.tableData[t].imgUrl,lrc:this.tableData[t].lyric})},400):this.$message({showClose:!0,message:"Sorry ,此歌曲无版权,暂不支持播放!!!!",type:"error",center:!0,offset:5})}).catch(t=>{console.log("失败",t),alert("获取资源失败,请联系管理员!!")})},lyric(t){this.$axios.get("http://www.mhweb.top:3000/lyric",{params:{songmid:this.tableData[t].songmid,time:(new Date).getTime()}}).then(a=>{this.tableData[t].lyric=a.data.lyric}).catch(t=>{console.log("失败",t)})},soso(){this.page=1,this.tableData=[],this.totalnum=0,this.go()},go(){this.$axios.get("http://www.mhweb.top:3000/proxy",{params:{p:this.page,n:this.n,w:this.input}}).then(t=>{this.curnum=t.data.data.song.curnum;for(let a=0;a<this.curnum;a++)this.tableData.push(t.data.data.song.list[a]);this.loading=!1}).catch(t=>{console.log("失败",t)})},load(){this.loading=!0,this.page+=1,setTimeout(()=>{this.go()},100)}}},o=i,n=(e("cccb"),e("2877")),r=Object(n["a"])(o,s,l,!1,null,null,null);a["default"]=r.exports},cccb:function(t,a,e){"use strict";var s=e("5ced"),l=e.n(s);l.a}}]);
//# sourceMappingURL=chunk-2f5cb18a.84f91f90.js.map